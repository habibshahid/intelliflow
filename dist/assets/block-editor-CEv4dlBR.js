import{c as m,r as p,j as e,A as J,D as M,X as pe,L as Ee,P as A,f as ce,U as qe,e as Le,S as xe,b as G,C as W,T as Y,h as Oe,R as Ie,d as Pe}from"./index-BXICclDe.js";const _e=m("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Me=m("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Ae=m("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ge=m("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),We=m("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),De=m("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ne=m("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),K=m("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),$e=m("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),ue="http://localhost:3001",Ue=[{value:"text",label:"Text Input"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox (Boolean)"},{value:"select",label:"Static Select"},{value:"select_database",label:"Database Select"}],ye=[{value:"intelliflow_globals",label:"IntelliFlow Globals"},{value:"call_control",label:"Call Control"},{value:"playback",label:"Playback"},{value:"functions",label:"Functions"},{value:"applications",label:"Applications"},{value:"chat_management",label:"Chat Management"},{value:"whatsapp_management",label:"WhatsApp Management"},{value:"ecommerce",label:"eCommerce"},{value:"cx9_apps",label:"CX9 Apps"},{value:"custom",label:"Custom"}],Qe=[{value:"fixed",label:"Fixed"},{value:"dynamic",label:"Dynamic (User can add)"}],Ve=["ðŸ“ž","ðŸ”Š","ðŸ’¬","ðŸŽµ","ðŸ“","ðŸ”€","ðŸŒ","â¹ï¸","â–¶ï¸","ðŸ”—","ðŸ“§","ðŸ’¾","âš™ï¸","ðŸ””","ðŸ“±","ðŸ’³","ðŸ›’","ðŸ‘¤","ðŸ¢","ðŸ“Š","ðŸ¤–","ðŸŽ¯","â°","ðŸ“…","ðŸ”’","ðŸ”“","âœ…","âŒ","âš ï¸","ðŸ’¡"],He={id:"",name:"",category:"custom",icon:"ðŸ“¦",color:"#6366f1",inputs:{min:1,max:1,labels:["input"]},outputs:{min:1,max:1,mode:"fixed",labels:["next"]},properties:[]},Je={key:"",label:"",type:"text",placeholder:"",required:!1},Ye=({initialDefinitions:h=null,onSave:F=null,onClose:R=null})=>{const[u,k]=p.useState({}),[x,f]=p.useState(null),[d,g]=p.useState(null),[v,fe]=p.useState({basic:!0,inputs:!0,outputs:!0,properties:!0}),[E,ge]=p.useState(""),[z,b]=p.useState(!1),[X,w]=p.useState([]),[q,be]=p.useState(!1),[C,Z]=p.useState(null),[je,D]=p.useState(!1),[L,ee]=p.useState(""),[N,te]=p.useState(""),[$,le]=p.useState(""),[O,se]=p.useState(""),[S,U]=p.useState(null),[I,ne]=p.useState(!1),[Q,P]=p.useState(null),[j,V]=p.useState(null),[B,ie]=p.useState(!1);p.useEffect(()=>{h&&k(h.blockTypes||{})},[h]);const T=(t,s="success")=>{Z({message:t,type:s}),setTimeout(()=>Z(null),3e3)},H=(t="",s="",n="",i="")=>{ee(t||""),te(s||""),le(n||""),se(i||""),U(null),V(null),P(null),ie(!1),D(!0)},me=async()=>{if(!L.trim()){P("Please enter a SQL query");return}ne(!0),P(null),U(null),V(null);try{const s=await(await fetch(`${ue}/api/query-raw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:L})})).json();if(s.success&&V(s.rows),N&&$){const n=await fetch(`${ue}/api/select-options`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:L,valueField:N,labelField:$,previewField:O||null})}),i=await n.json();if(!n.ok||!i.success)throw new Error(i.error||"Failed to execute query");U(i.options)}else if(!s.success)throw new Error(s.error||"Failed to execute query")}catch(t){P(t.message)}finally{ne(!1)}},ve=t=>{const s=[];return t.id||s.push("Block ID is required"),t.name||s.push("Block name is required"),/^[a-z][a-z0-9_]*$/.test(t.id)||s.push("Block ID must start with lowercase letter and contain only lowercase letters, numbers, and underscores"),t.inputs.max!==-1&&t.inputs.min>t.inputs.max&&s.push("Inputs min cannot be greater than max"),t.outputs.max!==-1&&t.outputs.min>t.outputs.max&&s.push("Outputs min cannot be greater than max"),t.properties.forEach((n,i)=>{n.key||s.push(`Property ${i+1}: Key is required`),n.label||s.push(`Property ${i+1}: Label is required`),/^[a-z][a-z0-9_]*$/.test(n.key)||s.push(`Property ${i+1}: Key must be lowercase with underscores`)}),s},Se=t=>{z&&d&&!confirm("You have unsaved changes. Discard them?")||(f(t),g(JSON.parse(JSON.stringify(u[t]))),w([]),b(!1))},ae=()=>{const t={...He},s=Date.now();t.id=`new_block_${s}`,t.name="New Block",g(t),f(null),w([]),b(!0)},ke=t=>{const s=u[t],n=JSON.parse(JSON.stringify(s));n.id=`${s.id}_copy`,n.name=`${s.name} (Copy)`,g(n),f(null),w([]),b(!0)},we=()=>{const t=ve(d);if(t.length>0){w(t);return}if(d.id!==x&&u[d.id]){w([`Block ID "${d.id}" already exists`]);return}const s={...u};x&&x!==d.id&&delete s[x],s[d.id]=d,k(s),f(d.id),b(!1),w([]),T("Block saved successfully!")},Ce=t=>{if(!confirm(`Are you sure you want to delete "${u[t].name}"?`))return;const s={...u};delete s[t],k(s),x===t&&(f(null),g(null)),T("Block deleted")},c=(t,s)=>{g(n=>{const i={...n},o=t.split(".");let a=i;for(let y=0;y<o.length-1;y++)Array.isArray(a[o[y]])?a[o[y]]=[...a[o[y]]]:a[o[y]]={...a[o[y]]},a=a[o[y]];return a[o[o.length-1]]=s,i}),b(!0)},ze=()=>{const t={...Je};t.key=`property_${d.properties.length+1}`,t.label=`Property ${d.properties.length+1}`,g(s=>({...s,properties:[...s.properties,t]})),b(!0)},Be=t=>{g(s=>({...s,properties:s.properties.filter((n,i)=>i!==t)})),b(!0)},oe=(t,s)=>{const n=t+s;n<0||n>=d.properties.length||(g(i=>{const o=[...i.properties];return[o[t],o[n]]=[o[n],o[t]],{...i,properties:o}}),b(!0))},r=(t,s,n)=>{g(i=>{const o=[...i.properties];return o[t]={...o[t],[s]:n},{...i,properties:o}}),b(!0)},Te=()=>{const t={blockTypes:u,systemVariables:(h==null?void 0:h.systemVariables)||[]},s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(s),i=document.createElement("a");i.href=n,i.download="blockDefinitions.json",i.click(),URL.revokeObjectURL(n),T("Exported blockDefinitions.json")},Fe=()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=s=>{const n=s.target.files[0],i=new FileReader;i.onload=o=>{try{const a=JSON.parse(o.target.result);if(a.blockTypes)k(a.blockTypes),f(null),g(null),T(`Imported ${Object.keys(a.blockTypes).length} blocks`);else throw new Error("Invalid format")}catch(a){T("Failed to import: "+a.message,"error")}},i.readAsText(n)},t.click()},re=Object.entries(u).filter(([t,s])=>{if(!E)return!0;const n=E.toLowerCase();return s.name.toLowerCase().includes(n)||s.id.toLowerCase().includes(n)||s.category.toLowerCase().includes(n)}),Re=re.reduce((t,[s,n])=>(t[n.category]||(t[n.category]=[]),t[n.category].push([s,n]),t),{}),_=t=>{fe(s=>({...s,[t]:!s[t]}))},l={container:{display:"flex",height:"100vh",background:"#f9fafb",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},sidebar:{width:"320px",background:"#fff",borderRight:"1px solid #e5e7eb",display:"flex",flexDirection:"column"},sidebarHeader:{padding:"16px",borderBottom:"1px solid #e5e7eb"},searchInput:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",outline:"none"},blockList:{flex:1,overflowY:"auto",padding:"8px"},blockItem:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"8px",cursor:"pointer",marginBottom:"4px",border:"1px solid transparent",transition:"all 0.15s ease"},mainContent:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},toolbar:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 20px",background:"#fff",borderBottom:"1px solid #e5e7eb"},editor:{flex:1,overflowY:"auto",padding:"20px"},section:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",marginBottom:"16px",overflow:"hidden"},sectionHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",background:"#f9fafb",borderBottom:"1px solid #e5e7eb",cursor:"pointer"},sectionContent:{padding:"16px"},formGroup:{marginBottom:"16px"},label:{display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"},input:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",boxSizing:"border-box"},select:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",background:"#fff",cursor:"pointer"},button:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"8px",fontSize:"13px",fontWeight:"500",cursor:"pointer",border:"none",transition:"all 0.15s ease"},primaryButton:{background:"#3b82f6",color:"#fff"},secondaryButton:{background:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb"},dangerButton:{background:"#fef2f2",color:"#dc2626",border:"1px solid #fecaca"},propertyCard:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"14px",marginBottom:"12px"},iconPicker:{display:"flex",flexWrap:"wrap",gap:"4px",marginTop:"8px"},iconOption:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",background:"#fff"},notification:{position:"fixed",bottom:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}};return e.jsxs("div",{style:l.container,children:[C&&e.jsxs("div",{style:{...l.notification,background:C.type==="error"?"#fef2f2":"#ecfdf5",color:C.type==="error"?"#dc2626":"#059669",border:`1px solid ${C.type==="error"?"#fecaca":"#a7f3d0"}`},children:[C.type==="error"?e.jsx(J,{size:18}):e.jsx(Ae,{size:18}),C.message]}),je&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"#fff",borderRadius:"12px",width:"90%",maxWidth:"1000px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",background:"#f8fafc"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(M,{size:22,color:"#0284c7"}),e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"SQL Query Tester"})]}),e.jsx("button",{onClick:()=>D(!1),style:{...l.button,padding:"6px"},children:e.jsx(pe,{size:20})})]}),e.jsxs("div",{style:{padding:"20px",overflowY:"auto",flex:1},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{...l.label,fontSize:"13px"},children:"SQL Query"}),e.jsx("textarea",{value:L,onChange:t=>ee(t.target.value),placeholder:"SELECT id, name FROM your_table WHERE status = 1",rows:5,style:{...l.input,fontFamily:"monospace",fontSize:"13px",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"13px"},children:"Value Field"}),e.jsx("input",{type:"text",value:N,onChange:t=>te(t.target.value),placeholder:"id",style:l.input})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"13px"},children:"Label Field"}),e.jsx("input",{type:"text",value:$,onChange:t=>le(t.target.value),placeholder:"name",style:l.input})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"13px"},children:"Preview Field (optional)"}),e.jsx("input",{type:"text",value:O,onChange:t=>se(t.target.value),placeholder:"file_path",style:l.input})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[e.jsx("button",{onClick:me,disabled:I,style:{...l.button,...l.primaryButton,opacity:I?.7:1},children:I?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{size:16,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),"Executing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{size:16})," Execute Query"]})}),(S||j)&&e.jsxs("button",{onClick:()=>ie(!B),style:{...l.button,...l.secondaryButton},children:[B?e.jsx($e,{size:16}):e.jsx(Ge,{size:16}),B?"Show Formatted":"Show Raw Data"]})]}),Q&&e.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(J,{size:18,color:"#dc2626"}),e.jsx("span",{style:{color:"#991b1b",fontSize:"13px"},children:Q})]}),!B&&S&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:e.jsxs("h4",{style:{margin:0,fontSize:"14px",color:"#374151"},children:["Formatted Options (",S.length," rows)"]})}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",borderBottom:"1px solid #e5e7eb",fontWeight:"600"},children:"Value"}),e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",borderBottom:"1px solid #e5e7eb",fontWeight:"600"},children:"Label"}),O&&e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",borderBottom:"1px solid #e5e7eb",fontWeight:"600"},children:"Preview"})]})}),e.jsx("tbody",{children:S.slice(0,50).map((t,s)=>e.jsxs("tr",{style:{background:s%2===0?"#fff":"#f9fafb"},children:[e.jsx("td",{style:{padding:"8px 12px",borderBottom:"1px solid #f3f4f6"},children:t.value}),e.jsx("td",{style:{padding:"8px 12px",borderBottom:"1px solid #f3f4f6"},children:t.label}),O&&e.jsx("td",{style:{padding:"8px 12px",borderBottom:"1px solid #f3f4f6"},children:t.preview||"-"})]},s))})]}),S.length>50&&e.jsxs("div",{style:{padding:"10px",textAlign:"center",background:"#f9fafb",color:"#6b7280",fontSize:"12px"},children:["Showing 50 of ",S.length," rows"]})]})]}),B&&j&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:e.jsxs("h4",{style:{margin:0,fontSize:"14px",color:"#374151"},children:["Raw Query Results (",j.length," rows)"]})}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"auto",maxHeight:"400px"},children:[j.length>0&&e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"#f9fafb",position:"sticky",top:0},children:Object.keys(j[0]).map(t=>e.jsx("th",{style:{padding:"10px 12px",textAlign:"left",borderBottom:"1px solid #e5e7eb",fontWeight:"600",whiteSpace:"nowrap"},children:t},t))})}),e.jsx("tbody",{children:j.slice(0,100).map((t,s)=>e.jsx("tr",{style:{background:s%2===0?"#fff":"#f9fafb"},children:Object.values(t).map((n,i)=>e.jsx("td",{style:{padding:"8px 12px",borderBottom:"1px solid #f3f4f6",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n===null?e.jsx("span",{style:{color:"#9ca3af"},children:"NULL"}):String(n)},i))},s))})]}),j.length>100&&e.jsxs("div",{style:{padding:"10px",textAlign:"center",background:"#f9fafb",color:"#6b7280",fontSize:"12px"},children:["Showing 100 of ",j.length," rows"]})]})]}),!S&&!j&&!Q&&!I&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[e.jsx(M,{size:40,style:{marginBottom:"12px",opacity:.5}}),e.jsx("div",{children:"Enter a SQL query and click Execute to test"})]})]}),e.jsx("div",{style:{padding:"16px 20px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",gap:"12px",background:"#f8fafc"},children:e.jsx("button",{onClick:()=>D(!1),style:{...l.button,...l.secondaryButton},children:"Close"})})]})}),e.jsxs("div",{style:l.sidebar,children:[e.jsxs("div",{style:l.sidebarHeader,children:[e.jsx("h2",{style:{margin:"0 0 12px 0",fontSize:"18px",fontWeight:"700"},children:"Block Definitions"}),e.jsx("input",{type:"text",placeholder:"Search blocks...",value:E,onChange:t=>ge(t.target.value),style:l.searchInput}),e.jsxs("button",{onClick:ae,style:{...l.button,...l.primaryButton,width:"100%",marginTop:"12px",justifyContent:"center"},children:[e.jsx(A,{size:16})," New Block"]})]}),e.jsxs("div",{style:l.blockList,children:[Object.entries(Re).map(([t,s])=>{var n;return e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"11px",fontWeight:"600",textTransform:"uppercase",color:"#6b7280",padding:"8px 12px",letterSpacing:"0.05em"},children:[((n=ye.find(i=>i.value===t))==null?void 0:n.label)||t,e.jsxs("span",{style:{marginLeft:"6px",color:"#9ca3af"},children:["(",s.length,")"]})]}),s.map(([i,o])=>e.jsxs("div",{onClick:()=>Se(i),style:{...l.blockItem,background:x===i?"#eff6ff":"transparent",borderColor:x===i?"#3b82f6":"transparent"},children:[e.jsx("span",{style:{fontSize:"18px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",background:`${o.color}20`,borderRadius:"6px"},children:o.icon}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937"},children:o.name}),e.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:o.id})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),ke(i)},style:{...l.button,padding:"4px",background:"transparent"},title:"Duplicate",children:e.jsx(We,{size:14,color:"#6b7280"})})]},i))]},t)}),re.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:E?"No blocks match your search":"No blocks defined yet"})]})]}),e.jsxs("div",{style:l.mainContent,children:[e.jsxs("div",{style:l.toolbar,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ce,{size:20,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"15px",fontWeight:"600",color:"#1f2937"},children:d?x?"Edit Block":"New Block":"Block Definition Editor"}),z&&e.jsx("span",{style:{fontSize:"11px",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:"10px"},children:"Unsaved"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>H(),style:{...l.button,background:"#0284c7",color:"#fff"},title:"Open SQL Query Tester",children:[e.jsx(M,{size:16})," SQL Tester"]}),e.jsxs("button",{onClick:Fe,style:{...l.button,...l.secondaryButton},children:[e.jsx(qe,{size:16})," Import"]}),e.jsxs("button",{onClick:Te,style:{...l.button,...l.secondaryButton},children:[e.jsx(Le,{size:16})," Export"]}),F&&e.jsxs("button",{onClick:()=>F({blockTypes:u,systemVariables:(h==null?void 0:h.systemVariables)||[]}),style:{...l.button,...l.primaryButton},children:[e.jsx(xe,{size:16})," Save All"]}),R&&e.jsx("button",{onClick:R,style:{...l.button,...l.secondaryButton},children:e.jsx(pe,{size:16})})]})]}),e.jsx("div",{style:l.editor,children:d?e.jsxs(e.Fragment,{children:[X.length>0&&e.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(J,{size:18,color:"#dc2626"}),e.jsx("span",{style:{fontWeight:"600",color:"#dc2626"},children:"Validation Errors"})]}),e.jsx("ul",{style:{margin:0,paddingLeft:"24px",color:"#991b1b",fontSize:"13px"},children:X.map((t,s)=>e.jsx("li",{children:t},s))})]}),e.jsxs("div",{style:l.section,children:[e.jsxs("div",{style:l.sectionHeader,onClick:()=>_("basic"),children:[e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:"Basic Information"}),v.basic?e.jsx(G,{size:18}):e.jsx(W,{size:18})]}),v.basic&&e.jsxs("div",{style:l.sectionContent,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Block ID *"}),e.jsx("input",{type:"text",value:d.id,onChange:t=>c("id",t.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"e.g., app_my_block",style:l.input}),e.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:"Lowercase letters, numbers, underscores only"})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Display Name *"}),e.jsx("input",{type:"text",value:d.name,onChange:t=>c("name",t.target.value),placeholder:"e.g., My Custom Block",style:l.input})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Category"}),e.jsx("select",{value:d.category,onChange:t=>c("category",t.target.value),style:l.select,children:ye.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Color"}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"color",value:d.color,onChange:t=>c("color",t.target.value),style:{width:"50px",height:"38px",padding:"2px",border:"1px solid #e5e7eb",borderRadius:"6px"}}),e.jsx("input",{type:"text",value:d.color,onChange:t=>c("color",t.target.value),style:{...l.input,flex:1}})]})]})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Icon"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"28px",background:`${d.color}20`,borderRadius:"8px",border:"1px solid #e5e7eb"},children:d.icon}),e.jsx("input",{type:"text",value:d.icon,onChange:t=>c("icon",t.target.value),placeholder:"Paste emoji",style:{...l.input,width:"100px"}})]}),e.jsx("div",{style:l.iconPicker,children:Ve.map(t=>e.jsx("button",{onClick:()=>c("icon",t),style:{...l.iconOption,borderColor:d.icon===t?"#3b82f6":"#e5e7eb",background:d.icon===t?"#eff6ff":"#fff"},children:t},t))})]})]})]}),e.jsxs("div",{style:l.section,children:[e.jsxs("div",{style:l.sectionHeader,onClick:()=>_("inputs"),children:[e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:"Inputs Configuration"}),v.inputs?e.jsx(G,{size:18}):e.jsx(W,{size:18})]}),v.inputs&&e.jsxs("div",{style:l.sectionContent,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Minimum Inputs"}),e.jsx("input",{type:"number",min:"0",value:d.inputs.min,onChange:t=>c("inputs.min",parseInt(t.target.value)||0),style:l.input})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Maximum Inputs (-1 = unlimited)"}),e.jsx("input",{type:"number",min:"-1",value:d.inputs.max,onChange:t=>c("inputs.max",parseInt(t.target.value)||0),style:l.input})]})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Input Labels (comma-separated)"}),e.jsx("input",{type:"text",value:(d.inputs.labels||[]).join(", "),onChange:t=>c("inputs.labels",t.target.value.split(",").map(s=>s.trim()).filter(Boolean)),placeholder:"e.g., input, trigger",style:l.input})]})]})]}),e.jsxs("div",{style:l.section,children:[e.jsxs("div",{style:l.sectionHeader,onClick:()=>_("outputs"),children:[e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:"Outputs Configuration"}),v.outputs?e.jsx(G,{size:18}):e.jsx(W,{size:18})]}),v.outputs&&e.jsxs("div",{style:l.sectionContent,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Minimum Outputs"}),e.jsx("input",{type:"number",min:"0",value:d.outputs.min,onChange:t=>c("outputs.min",parseInt(t.target.value)||0),style:l.input})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Maximum Outputs (-1 = unlimited)"}),e.jsx("input",{type:"number",min:"-1",value:d.outputs.max,onChange:t=>c("outputs.max",parseInt(t.target.value)||0),style:l.input})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Output Mode"}),e.jsx("select",{value:d.outputs.mode||"fixed",onChange:t=>c("outputs.mode",t.target.value),style:l.select,children:Qe.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{style:l.formGroup,children:[e.jsx("label",{style:l.label,children:"Output Labels (comma-separated)"}),e.jsx("input",{type:"text",value:(d.outputs.labels||[]).join(", "),onChange:t=>c("outputs.labels",t.target.value.split(",").map(s=>s.trim()).filter(Boolean)),placeholder:"e.g., success, error",style:l.input})]})]})]}),e.jsxs("div",{style:l.section,children:[e.jsxs("div",{style:l.sectionHeader,onClick:()=>_("properties"),children:[e.jsxs("span",{style:{fontWeight:"600",color:"#1f2937"},children:["Properties (",d.properties.length,")"]}),v.properties?e.jsx(G,{size:18}):e.jsx(W,{size:18})]}),v.properties&&e.jsxs("div",{style:l.sectionContent,children:[d.properties.map((t,s)=>e.jsxs("div",{style:l.propertyCard,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("span",{style:{fontWeight:"600",fontSize:"14px",color:"#374151"},children:["Property ",s+1,": ",t.label||"(unnamed)"]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{onClick:()=>oe(s,-1),disabled:s===0,style:{...l.button,padding:"4px",opacity:s===0?.5:1},children:e.jsx(Me,{size:14})}),e.jsx("button",{onClick:()=>oe(s,1),disabled:s===d.properties.length-1,style:{...l.button,padding:"4px",opacity:s===d.properties.length-1?.5:1},children:e.jsx(_e,{size:14})}),e.jsx("button",{onClick:()=>Be(s),style:{...l.button,...l.dangerButton,padding:"4px"},children:e.jsx(Y,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Key *"}),e.jsx("input",{type:"text",value:t.key,onChange:n=>r(s,"key",n.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),style:{...l.input,fontSize:"13px",padding:"8px 10px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Label *"}),e.jsx("input",{type:"text",value:t.label,onChange:n=>r(s,"label",n.target.value),style:{...l.input,fontSize:"13px",padding:"8px 10px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Type"}),e.jsx("select",{value:t.type,onChange:n=>r(s,"type",n.target.value),style:{...l.select,fontSize:"13px",padding:"8px 10px"},children:Ue.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Placeholder"}),e.jsx("input",{type:"text",value:t.placeholder||"",onChange:n=>r(s,"placeholder",n.target.value),style:{...l.input,fontSize:"13px",padding:"8px 10px"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"16px",paddingBottom:"8px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.required||!1,onChange:n=>r(s,"required",n.target.checked)}),e.jsx("span",{style:{fontSize:"13px"},children:"Required"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.showPredefinedVariables||!1,onChange:n=>r(s,"showPredefinedVariables",n.target.checked)}),e.jsx("span",{style:{fontSize:"13px"},children:"Show Variables"})]})]})]}),t.type==="select"&&e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Options (one per line: value|label)"}),e.jsx("textarea",{value:(t.options||[]).map(n=>typeof n=="object"?`${n.value}|${n.label}`:n).join(`
`),onChange:n=>{const o=n.target.value.split(`
`).map(a=>{const[y,de]=a.split("|");return de?{value:y.trim(),label:de.trim()}:{value:a.trim(),label:a.trim()}}).filter(a=>a.value);r(s,"options",o)},placeholder:`value1|Label 1
value2|Label 2`,rows:4,style:{...l.input,fontSize:"12px",fontFamily:"monospace"}})]}),t.type==="select_database"&&e.jsxs("div",{style:{marginTop:"12px",display:"grid",gap:"12px",background:"#f0f9ff",padding:"12px",borderRadius:"8px",border:"1px solid #bae6fd"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(M,{size:16,color:"#0284c7"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"#0284c7"},children:"Database Query Configuration"})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx("button",{type:"button",onClick:()=>{if(t.groups&&t.groups.length>0){const n=t.groups[0];r(s,"query",n.query||""),r(s,"valueField",n.valueField||""),r(s,"labelField",n.labelField||""),r(s,"previewField",n.previewField||""),r(s,"groups",void 0)}else{const n={label:"Group 1",query:t.query||"",valueField:t.valueField||"",labelField:t.labelField||"",previewField:t.previewField||""};r(s,"groups",[n]),r(s,"query",void 0),r(s,"valueField",void 0),r(s,"labelField",void 0),r(s,"previewField",void 0)}},style:{...l.button,background:t.groups?"#7c3aed":"#e5e7eb",color:t.groups?"#fff":"#374151",padding:"4px 10px",fontSize:"11px"},children:t.groups?"ðŸ“‘ Groups Mode":"ðŸ“„ Simple Mode"})})]}),!t.groups&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"SQL Query"}),e.jsx("textarea",{value:t.query||"",onChange:n=>r(s,"query",n.target.value),placeholder:"SELECT id, name FROM table WHERE status = 1",rows:4,style:{...l.input,fontSize:"12px",fontFamily:"monospace",background:"#fff"}}),e.jsxs("div",{style:{fontSize:"10px",color:"#64748b",marginTop:"4px"},children:["Use ","{{param}}"," for URL parameters, ","{{field}}"," for parent values, ","{{field.column}}"," for parent columns"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Value Field *"}),e.jsx("input",{type:"text",value:t.valueField||"",onChange:n=>r(s,"valueField",n.target.value),placeholder:"id",style:{...l.input,fontSize:"13px",padding:"8px 10px",background:"#fff"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Label Field *"}),e.jsx("input",{type:"text",value:t.labelField||"",onChange:n=>r(s,"labelField",n.target.value),placeholder:"name",style:{...l.input,fontSize:"13px",padding:"8px 10px",background:"#fff"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Preview Field (optional)"}),e.jsx("input",{type:"text",value:t.previewField||"",onChange:n=>r(s,"previewField",n.target.value),placeholder:"file_url",style:{...l.input,fontSize:"13px",padding:"8px 10px",background:"#fff"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Depends On (parent field)"}),e.jsx("input",{type:"text",value:t.dependsOn||"",onChange:n=>r(s,"dependsOn",n.target.value),placeholder:"parent_field_key",style:{...l.input,fontSize:"13px",padding:"8px 10px",background:"#fff"}})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.searchable||!1,onChange:n=>r(s,"searchable",n.target.checked)}),e.jsx("span",{style:{fontSize:"13px"},children:"Searchable"})]}),e.jsxs("button",{type:"button",onClick:()=>H(t.query,t.valueField,t.labelField,t.previewField),style:{...l.button,background:"#0284c7",color:"#fff",padding:"6px 12px",fontSize:"12px"},children:[e.jsx(K,{size:14})," Test Query"]})]})]}),t.groups&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"11px",color:"#64748b",marginBottom:"8px"},children:"Groups mode allows multiple option groups (optgroups) in one dropdown. Each group has its own query."}),t.groups.map((n,i)=>e.jsxs("div",{style:{background:"#fff",border:"1px solid #e0e7ff",borderRadius:"8px",padding:"12px",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsxs("span",{style:{fontSize:"12px",fontWeight:"600",color:"#4f46e5"},children:["Group ",i+1,": ",n.label||"(unnamed)"]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{type:"button",onClick:()=>H(n.query,n.valueField,n.labelField,n.previewField),style:{...l.button,padding:"4px 8px",fontSize:"11px",background:"#0284c7",color:"#fff"},title:"Test this group's query",children:e.jsx(K,{size:12})}),e.jsx("button",{type:"button",onClick:()=>{const o=t.groups.filter((a,y)=>y!==i);r(s,"groups",o.length>0?o:void 0),o.length===0&&(r(s,"query",n.query||""),r(s,"valueField",n.valueField||""),r(s,"labelField",n.labelField||""))},style:{...l.button,...l.dangerButton,padding:"4px 8px",fontSize:"11px"},title:"Remove group",children:e.jsx(Y,{size:12})})]})]}),e.jsxs("div",{style:{display:"grid",gap:"10px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"11px"},children:"Group Label"}),e.jsx("input",{type:"text",value:n.label||"",onChange:o=>{const a=[...t.groups];a[i]={...a[i],label:o.target.value},r(s,"groups",a)},placeholder:"e.g., Audio Files",style:{...l.input,fontSize:"12px",padding:"6px 8px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"11px"},children:"SQL Query"}),e.jsx("textarea",{value:n.query||"",onChange:o=>{const a=[...t.groups];a[i]={...a[i],query:o.target.value},r(s,"groups",a)},placeholder:"SELECT id, name FROM table",rows:3,style:{...l.input,fontSize:"11px",fontFamily:"monospace",padding:"6px 8px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"11px"},children:"Value Field"}),e.jsx("input",{type:"text",value:n.valueField||"",onChange:o=>{const a=[...t.groups];a[i]={...a[i],valueField:o.target.value},r(s,"groups",a)},placeholder:"id",style:{...l.input,fontSize:"12px",padding:"6px 8px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"11px"},children:"Label Field"}),e.jsx("input",{type:"text",value:n.labelField||"",onChange:o=>{const a=[...t.groups];a[i]={...a[i],labelField:o.target.value},r(s,"groups",a)},placeholder:"name",style:{...l.input,fontSize:"12px",padding:"6px 8px"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"11px"},children:"Preview Field (optional)"}),e.jsx("input",{type:"text",value:n.previewField||"",onChange:o=>{const a=[...t.groups];a[i]={...a[i],previewField:o.target.value},r(s,"groups",a)},placeholder:"file_url",style:{...l.input,fontSize:"12px",padding:"6px 8px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"11px"},children:"Property Type (optional)"}),e.jsxs("select",{value:n.propertyType||"",onChange:o=>{const a=[...t.groups];a[i]={...a[i],propertyType:o.target.value||void 0},r(s,"groups",a)},style:{...l.select,fontSize:"12px",padding:"6px 8px"},children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"media_audio",children:"Media Audio (ðŸ”Š preview)"}),e.jsx("option",{value:"media_image",children:"Media Image (ðŸ–¼ï¸ preview)"}),e.jsx("option",{value:"media_video",children:"Media Video (ðŸŽ¬ preview)"})]})]})]})]})]},i)),e.jsxs("button",{type:"button",onClick:()=>{var i;const n=[...t.groups||[],{label:`Group ${(((i=t.groups)==null?void 0:i.length)||0)+1}`,query:"",valueField:"",labelField:""}];r(s,"groups",n)},style:{...l.button,...l.secondaryButton,width:"100%",justifyContent:"center",padding:"8px",fontSize:"12px"},children:[e.jsx(A,{size:14})," Add Option Group"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"8px",paddingTop:"12px",borderTop:"1px solid #e0e7ff"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Depends On (parent field)"}),e.jsx("input",{type:"text",value:t.dependsOn||"",onChange:n=>r(s,"dependsOn",n.target.value),placeholder:"parent_field_key",style:{...l.input,fontSize:"13px",padding:"8px 10px",background:"#fff"}})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",paddingBottom:"8px"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.searchable||!1,onChange:n=>r(s,"searchable",n.target.checked)}),e.jsx("span",{style:{fontSize:"13px"},children:"Searchable"})]})})]})]})]}),t.type==="number"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px",marginTop:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Min"}),e.jsx("input",{type:"number",value:t.min??"",onChange:n=>r(s,"min",n.target.value?parseFloat(n.target.value):void 0),style:{...l.input,fontSize:"13px",padding:"8px 10px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Max"}),e.jsx("input",{type:"number",value:t.max??"",onChange:n=>r(s,"max",n.target.value?parseFloat(n.target.value):void 0),style:{...l.input,fontSize:"13px",padding:"8px 10px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Step"}),e.jsx("input",{type:"number",value:t.step??"",onChange:n=>r(s,"step",n.target.value?parseFloat(n.target.value):void 0),style:{...l.input,fontSize:"13px",padding:"8px 10px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...l.label,fontSize:"12px"},children:"Default"}),e.jsx("input",{type:"number",value:t.default??"",onChange:n=>r(s,"default",n.target.value?parseFloat(n.target.value):void 0),style:{...l.input,fontSize:"13px",padding:"8px 10px"}})]})]})]},s)),e.jsxs("button",{onClick:ze,style:{...l.button,...l.secondaryButton,width:"100%",justifyContent:"center"},children:[e.jsx(A,{size:16})," Add Property"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",paddingBottom:"40px"},children:[x&&e.jsxs("button",{onClick:()=>Ce(x),style:{...l.button,...l.dangerButton},children:[e.jsx(Y,{size:16})," Delete Block"]}),e.jsxs("button",{onClick:()=>be(!q),style:{...l.button,...l.secondaryButton},children:[q?e.jsx(De,{size:16}):e.jsx(Ne,{size:16}),q?"Hide":"Preview"," JSON"]}),e.jsxs("button",{onClick:we,disabled:!z,style:{...l.button,...l.primaryButton,opacity:z?1:.5,cursor:z?"pointer":"not-allowed"},children:[e.jsx(xe,{size:16})," Save Block"]})]}),q&&e.jsx("div",{style:{background:"#1e293b",color:"#e2e8f0",padding:"16px",borderRadius:"8px",fontFamily:"monospace",fontSize:"12px",overflow:"auto",maxHeight:"400px",marginBottom:"40px"},children:e.jsx("pre",{style:{margin:0},children:JSON.stringify(d,null,2)})})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#6b7280"},children:[e.jsx(ce,{size:48,style:{marginBottom:"16px",opacity:.5}}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"500",marginBottom:"8px"},children:"Block Definition Editor"}),e.jsx("div",{style:{fontSize:"14px",marginBottom:"24px"},children:"Select a block to edit or create a new one"}),e.jsxs("button",{onClick:ae,style:{...l.button,...l.primaryButton},children:[e.jsx(A,{size:16})," Create New Block"]})]})})]})]})};function Ke(){const[h,F]=p.useState(Pe),R=u=>{const k=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),x=URL.createObjectURL(k),f=document.createElement("a");f.href=x,f.download="blockDefinitions.json",f.click(),URL.revokeObjectURL(x),F(u),alert("Block definitions exported! Replace src/blockDefinitions.json with the downloaded file.")};return e.jsx(Ye,{initialDefinitions:h,onSave:R})}const he=document.getElementById("block-editor-root");he&&Oe.createRoot(he).render(e.jsx(Ie.StrictMode,{children:e.jsx(Ke,{})}));
